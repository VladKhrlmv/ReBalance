package com.rebalance.backend.service

import com.google.gson.Gson
import com.rebalance.PreferencesData
import com.rebalance.backend.api.RequestsSender
import com.rebalance.backend.entities.ApplicationUser
import com.rebalance.backend.entities.Expense
import com.rebalance.backend.entities.ExpenseGroup
import io.mockk.*
import junit.framework.Assert.assertEquals
import org.junit.After
import org.junit.Before
import org.junit.Test
import java.time.LocalDate
import java.time.format.DateTimeFormatter

internal class BackendServiceTest {
    private val backendService = spyk(BackendService(PreferencesData("192.168.0.1", "1", 1))) {
        every { setPolicy() } just runs
    }

    @Before
    fun init() {
        mockkObject(RequestsSender)
        MockKAnnotations.init(this)
    }

    @After
    fun teardown() {
        unmockkObject(RequestsSender)
    }


    @Test
    fun getScaleItems() {
        val expected = listOf(
            ScaleItem("Day", "D"),
            ScaleItem("Week", "W"),
            ScaleItem("Month", "M"),
            ScaleItem("Year", "Y")
        )

        assertEquals(expected, backendService.getScaleItems())
    }


    @Test
    fun getScaledDateItemsDay() {
        val expected = ArrayList<ScaledDateItem>()
        expected.add(ScaledDateItem("2023-01-15", getDate("2023-01-15"), getDate("2023-01-15")))
        expected.add(ScaledDateItem("2023-01-16", getDate("2023-01-16"), getDate("2023-01-16")))
        expected.add(ScaledDateItem("2023-01-17", getDate("2023-01-17"), getDate("2023-01-17")))
        expected.add(ScaledDateItem("2023-01-20", getDate("2023-01-20"), getDate("2023-01-20")))
        expected.add(ScaledDateItem("2023-01-25", getDate("2023-01-25"), getDate("2023-01-25")))

        every { RequestsSender.sendGet(any()) } returns "[{\"id\":46,\"amount\":-41.0,\"description\":\"i372tr\",\"dateStamp\":\"2023-01-20\",\"category\":\"egfw\",\"globalId\":-1,\"user\":{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":47,\"amount\":-41.0,\"description\":\"i372tr\",\"dateStamp\":\"2023-01-20\",\"category\":\"egfw\",\"globalId\":-1,\"user\":{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":48,\"amount\":-41.0,\"description\":\"i372tr\",\"dateStamp\":\"2023-01-20\",\"category\":\"egfw\",\"globalId\":-1,\"user\":{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":49,\"amount\":123.0,\"description\":\"i372tr\",\"dateStamp\":\"2023-01-20\",\"category\":\"egfw\",\"globalId\":-1,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":113,\"amount\":-233.33333333333334,\"description\":\"test7\",\"dateStamp\":\"2023-01-16\",\"category\":\"test\",\"globalId\":0,\"user\":{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":50,\"amount\":-22.5,\"description\":\"srbt\",\"dateStamp\":\"2023-01-15\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":114,\"amount\":-233.33333333333334,\"description\":\"test7\",\"dateStamp\":\"2023-01-16\",\"category\":\"test\",\"globalId\":0,\"user\":{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":51,\"amount\":-22.5,\"description\":\"srbt\",\"dateStamp\":\"2023-01-15\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":115,\"amount\":-233.33333333333334,\"description\":\"test7\",\"dateStamp\":\"2023-01-16\",\"category\":\"test\",\"globalId\":0,\"user\":{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":52,\"amount\":45.0,\"description\":\"srbt\",\"dateStamp\":\"2023-01-15\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":116,\"amount\":700.0,\"description\":\"test7\",\"dateStamp\":\"2023-01-16\",\"category\":\"test\",\"globalId\":0,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":246,\"amount\":-219.0,\"description\":\"from 1\",\"dateStamp\":\"2023-01-17\",\"category\":\"fiah\",\"globalId\":0,\"user\":{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":247,\"amount\":-219.0,\"description\":\"from 1\",\"dateStamp\":\"2023-01-17\",\"category\":\"fiah\",\"globalId\":0,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":248,\"amount\":438.0,\"description\":\"from 1\",\"dateStamp\":\"2023-01-17\",\"category\":\"fiah\",\"globalId\":0,\"user\":{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":89,\"amount\":-11.666666666666666,\"description\":\"test \",\"dateStamp\":\"2023-01-25\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":90,\"amount\":-11.666666666666666,\"description\":\"test \",\"dateStamp\":\"2023-01-25\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":91,\"amount\":-11.666666666666666,\"description\":\"test \",\"dateStamp\":\"2023-01-25\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":92,\"amount\":35.0,\"description\":\"test \",\"dateStamp\":\"2023-01-25\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":124,\"amount\":-900.0,\"description\":\"test9\",\"dateStamp\":\"2023-01-16\",\"category\":\"test\",\"globalId\":0,\"user\":{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":125,\"amount\":900.0,\"description\":\"test9\",\"dateStamp\":\"2023-01-16\",\"category\":\"test\",\"globalId\":0,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}}]"

        val actual = backendService.getScaledDateItems("Day")
        assertEquals(expected, actual)
    }

    @Test
    fun getScaledDateItemsWeek() {
        val expected = ArrayList<ScaledDateItem>()
        expected.add(
            ScaledDateItem(
                "2023-01-09\n2023-01-15",
                getDate("2023-01-09"),
                getDate("2023-01-15")
            )
        )
        expected.add(
            ScaledDateItem(
                "2023-01-16\n2023-01-22",
                getDate("2023-01-16"),
                getDate("2023-01-22")
            )
        )
        expected.add(
            ScaledDateItem(
                "2023-01-23\n2023-01-29",
                getDate("2023-01-23"),
                getDate("2023-01-29")
            )
        )

        every { RequestsSender.sendGet(any()) } returns "[{\"id\":46,\"amount\":-41.0,\"description\":\"i372tr\",\"dateStamp\":\"2023-01-20\",\"category\":\"egfw\",\"globalId\":-1,\"user\":{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":47,\"amount\":-41.0,\"description\":\"i372tr\",\"dateStamp\":\"2023-01-20\",\"category\":\"egfw\",\"globalId\":-1,\"user\":{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":48,\"amount\":-41.0,\"description\":\"i372tr\",\"dateStamp\":\"2023-01-20\",\"category\":\"egfw\",\"globalId\":-1,\"user\":{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":49,\"amount\":123.0,\"description\":\"i372tr\",\"dateStamp\":\"2023-01-20\",\"category\":\"egfw\",\"globalId\":-1,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":113,\"amount\":-233.33333333333334,\"description\":\"test7\",\"dateStamp\":\"2023-01-16\",\"category\":\"test\",\"globalId\":0,\"user\":{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":50,\"amount\":-22.5,\"description\":\"srbt\",\"dateStamp\":\"2023-01-15\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":114,\"amount\":-233.33333333333334,\"description\":\"test7\",\"dateStamp\":\"2023-01-16\",\"category\":\"test\",\"globalId\":0,\"user\":{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":51,\"amount\":-22.5,\"description\":\"srbt\",\"dateStamp\":\"2023-01-15\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":115,\"amount\":-233.33333333333334,\"description\":\"test7\",\"dateStamp\":\"2023-01-16\",\"category\":\"test\",\"globalId\":0,\"user\":{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":52,\"amount\":45.0,\"description\":\"srbt\",\"dateStamp\":\"2023-01-15\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":116,\"amount\":700.0,\"description\":\"test7\",\"dateStamp\":\"2023-01-16\",\"category\":\"test\",\"globalId\":0,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":246,\"amount\":-219.0,\"description\":\"from 1\",\"dateStamp\":\"2023-01-17\",\"category\":\"fiah\",\"globalId\":0,\"user\":{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":247,\"amount\":-219.0,\"description\":\"from 1\",\"dateStamp\":\"2023-01-17\",\"category\":\"fiah\",\"globalId\":0,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":248,\"amount\":438.0,\"description\":\"from 1\",\"dateStamp\":\"2023-01-17\",\"category\":\"fiah\",\"globalId\":0,\"user\":{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":89,\"amount\":-11.666666666666666,\"description\":\"test \",\"dateStamp\":\"2023-01-25\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":90,\"amount\":-11.666666666666666,\"description\":\"test \",\"dateStamp\":\"2023-01-25\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":91,\"amount\":-11.666666666666666,\"description\":\"test \",\"dateStamp\":\"2023-01-25\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":92,\"amount\":35.0,\"description\":\"test \",\"dateStamp\":\"2023-01-25\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":124,\"amount\":-900.0,\"description\":\"test9\",\"dateStamp\":\"2023-01-16\",\"category\":\"test\",\"globalId\":0,\"user\":{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":125,\"amount\":900.0,\"description\":\"test9\",\"dateStamp\":\"2023-01-16\",\"category\":\"test\",\"globalId\":0,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}}]"

        val actual = backendService.getScaledDateItems("Week")
        assertEquals(expected, actual)
    }

    @Test
    fun getScaledDateItemsMonth() {
        val expected = ArrayList<ScaledDateItem>()
        expected.add(ScaledDateItem("JANUARY 2023", getDate("2023-01-01"), getDate("2023-01-31")))

        every { RequestsSender.sendGet(any()) } returns "[{\"id\":46,\"amount\":-41.0,\"description\":\"i372tr\",\"dateStamp\":\"2023-01-20\",\"category\":\"egfw\",\"globalId\":-1,\"user\":{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":47,\"amount\":-41.0,\"description\":\"i372tr\",\"dateStamp\":\"2023-01-20\",\"category\":\"egfw\",\"globalId\":-1,\"user\":{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":48,\"amount\":-41.0,\"description\":\"i372tr\",\"dateStamp\":\"2023-01-20\",\"category\":\"egfw\",\"globalId\":-1,\"user\":{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":49,\"amount\":123.0,\"description\":\"i372tr\",\"dateStamp\":\"2023-01-20\",\"category\":\"egfw\",\"globalId\":-1,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":113,\"amount\":-233.33333333333334,\"description\":\"test7\",\"dateStamp\":\"2023-01-16\",\"category\":\"test\",\"globalId\":0,\"user\":{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":50,\"amount\":-22.5,\"description\":\"srbt\",\"dateStamp\":\"2023-01-15\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":114,\"amount\":-233.33333333333334,\"description\":\"test7\",\"dateStamp\":\"2023-01-16\",\"category\":\"test\",\"globalId\":0,\"user\":{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":51,\"amount\":-22.5,\"description\":\"srbt\",\"dateStamp\":\"2023-01-15\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":115,\"amount\":-233.33333333333334,\"description\":\"test7\",\"dateStamp\":\"2023-01-16\",\"category\":\"test\",\"globalId\":0,\"user\":{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":52,\"amount\":45.0,\"description\":\"srbt\",\"dateStamp\":\"2023-01-15\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":116,\"amount\":700.0,\"description\":\"test7\",\"dateStamp\":\"2023-01-16\",\"category\":\"test\",\"globalId\":0,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":246,\"amount\":-219.0,\"description\":\"from 1\",\"dateStamp\":\"2023-01-17\",\"category\":\"fiah\",\"globalId\":0,\"user\":{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":247,\"amount\":-219.0,\"description\":\"from 1\",\"dateStamp\":\"2023-01-17\",\"category\":\"fiah\",\"globalId\":0,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":248,\"amount\":438.0,\"description\":\"from 1\",\"dateStamp\":\"2023-01-17\",\"category\":\"fiah\",\"globalId\":0,\"user\":{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":89,\"amount\":-11.666666666666666,\"description\":\"test \",\"dateStamp\":\"2023-01-25\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":90,\"amount\":-11.666666666666666,\"description\":\"test \",\"dateStamp\":\"2023-01-25\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":91,\"amount\":-11.666666666666666,\"description\":\"test \",\"dateStamp\":\"2023-01-25\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":92,\"amount\":35.0,\"description\":\"test \",\"dateStamp\":\"2023-01-25\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":124,\"amount\":-900.0,\"description\":\"test9\",\"dateStamp\":\"2023-01-16\",\"category\":\"test\",\"globalId\":0,\"user\":{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":125,\"amount\":900.0,\"description\":\"test9\",\"dateStamp\":\"2023-01-16\",\"category\":\"test\",\"globalId\":0,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}}]"

        val actual = backendService.getScaledDateItems("Month")
        assertEquals(expected, actual)
    }

    @Test
    fun getScaledDateItemsYear() {
        val expected = ArrayList<ScaledDateItem>()
        expected.add(ScaledDateItem("2023", getDate("2023-01-01"), getDate("2023-12-31")))

        every { RequestsSender.sendGet(any()) } returns "[{\"id\":46,\"amount\":-41.0,\"description\":\"i372tr\",\"dateStamp\":\"2023-01-20\",\"category\":\"egfw\",\"globalId\":-1,\"user\":{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":47,\"amount\":-41.0,\"description\":\"i372tr\",\"dateStamp\":\"2023-01-20\",\"category\":\"egfw\",\"globalId\":-1,\"user\":{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":48,\"amount\":-41.0,\"description\":\"i372tr\",\"dateStamp\":\"2023-01-20\",\"category\":\"egfw\",\"globalId\":-1,\"user\":{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":49,\"amount\":123.0,\"description\":\"i372tr\",\"dateStamp\":\"2023-01-20\",\"category\":\"egfw\",\"globalId\":-1,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":113,\"amount\":-233.33333333333334,\"description\":\"test7\",\"dateStamp\":\"2023-01-16\",\"category\":\"test\",\"globalId\":0,\"user\":{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":50,\"amount\":-22.5,\"description\":\"srbt\",\"dateStamp\":\"2023-01-15\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":114,\"amount\":-233.33333333333334,\"description\":\"test7\",\"dateStamp\":\"2023-01-16\",\"category\":\"test\",\"globalId\":0,\"user\":{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":51,\"amount\":-22.5,\"description\":\"srbt\",\"dateStamp\":\"2023-01-15\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":115,\"amount\":-233.33333333333334,\"description\":\"test7\",\"dateStamp\":\"2023-01-16\",\"category\":\"test\",\"globalId\":0,\"user\":{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":52,\"amount\":45.0,\"description\":\"srbt\",\"dateStamp\":\"2023-01-15\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":116,\"amount\":700.0,\"description\":\"test7\",\"dateStamp\":\"2023-01-16\",\"category\":\"test\",\"globalId\":0,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":246,\"amount\":-219.0,\"description\":\"from 1\",\"dateStamp\":\"2023-01-17\",\"category\":\"fiah\",\"globalId\":0,\"user\":{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":247,\"amount\":-219.0,\"description\":\"from 1\",\"dateStamp\":\"2023-01-17\",\"category\":\"fiah\",\"globalId\":0,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":248,\"amount\":438.0,\"description\":\"from 1\",\"dateStamp\":\"2023-01-17\",\"category\":\"fiah\",\"globalId\":0,\"user\":{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":89,\"amount\":-11.666666666666666,\"description\":\"test \",\"dateStamp\":\"2023-01-25\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":90,\"amount\":-11.666666666666666,\"description\":\"test \",\"dateStamp\":\"2023-01-25\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":91,\"amount\":-11.666666666666666,\"description\":\"test \",\"dateStamp\":\"2023-01-25\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":92,\"amount\":35.0,\"description\":\"test \",\"dateStamp\":\"2023-01-25\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":124,\"amount\":-900.0,\"description\":\"test9\",\"dateStamp\":\"2023-01-16\",\"category\":\"test\",\"globalId\":0,\"user\":{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}},{\"id\":125,\"amount\":900.0,\"description\":\"test9\",\"dateStamp\":\"2023-01-16\",\"category\":\"test\",\"globalId\":0,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":17,\"name\":\"aaaaa\",\"currency\":\"ASD\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":4,\"username\":\"Denys\",\"email\":\"user.4@gmail.com\"},{\"id\":6,\"username\":\"No group\",\"email\":\"user.6@gmail.com\"}]}}]"

        val actual = backendService.getScaledDateItems("Year")
        assertEquals(expected, actual)
    }


    @Test
    fun getPersonal() {
        val expected = ArrayList<ExpenseItem>()
        expected.add(
            ExpenseItem(
                Expense(
                    99,
                    100.0,
                    "2023-01-16",
                    "testtesttest",
                    "testtesttest",
                    -1
                )
            )
        )

        every { RequestsSender.sendGet(any()) } returns "[{\"id\":99,\"amount\":100.0,\"description\":\"testtesttest\",\"dateStamp\":\"2023-01-16\",\"category\":\"testtesttest\",\"globalId\":-1,\"user\":{\"id\":5,\"username\":\"Random\",\"email\":\"user.5@gmail.com\"},\"group\":{\"id\":6,\"name\":\"peruser.5@gmail.com\",\"currency\":\"PLN\",\"users\":[{\"id\":5,\"username\":\"Random\",\"email\":\"user.5@gmail.com\"}]}}]"

        val actual = backendService.getPersonal(
            LocalDate.of(2023, 1, 16),
            LocalDate.of(2023, 1, 16)
        )
        assertEquals(expected, actual)
    }

    @Test
    fun getPersonalMore() {
        val expected = ArrayList<ExpenseItem>()
        expected.add(
            ExpenseItem(
                "test", 0.0, arrayListOf(
                    Expense(78, -61.5, "2023-01-09", "test", "Example", -1),
                    Expense(79, -61.5, "2023-01-09", "test", "Example", -1),
                    Expense(80, 123.0, "2023-01-09", "test", "Example", -1)
                )
            )
        )

        every { RequestsSender.sendGet(any()) } returns "[{\"id\":78,\"amount\":-61.5,\"description\":\"Example\",\"dateStamp\":\"2023-01-09\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},\"group\":{\"id\":77,\"name\":\"My own group\",\"currency\":\"UAH\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":24,\"username\":\"Artemii\",\"email\":\"artemii@example.com\"}]}},{\"id\":79,\"amount\":-61.5,\"description\":\"Example\",\"dateStamp\":\"2023-01-09\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},\"group\":{\"id\":77,\"name\":\"My own group\",\"currency\":\"UAH\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":24,\"username\":\"Artemii\",\"email\":\"artemii@example.com\"}]}},{\"id\":80,\"amount\":123.0,\"description\":\"Example\",\"dateStamp\":\"2023-01-09\",\"category\":\"test\",\"globalId\":-1,\"user\":{\"id\":24,\"username\":\"Artemii\",\"email\":\"artemii@example.com\"},\"group\":{\"id\":77,\"name\":\"My own group\",\"currency\":\"UAH\",\"users\":[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},{\"id\":24,\"username\":\"Artemii\",\"email\":\"artemii@example.com\"}]}}]"

        val actual = backendService.getPersonal(
            LocalDate.of(2023, 1, 9),
            LocalDate.of(2023, 1, 9)
        )
        assertEquals(expected, actual)
    }


    @Test
    fun getGroups() {
        val expected = ArrayList<ExpenseGroup>()
        expected.add(
            ExpenseGroup(
                1, "New name", "EUR", setOf(
                    ApplicationUser(41, "aaa", "aaa")
                )
            )
        )

        every { RequestsSender.sendGet(any()) } returns Gson().toJson(expected)

        val actual = backendService.getGroups()
        assertEquals(expected, actual)
    }

    @Test
    fun getGroupsMore() {
        val expected = ArrayList<ExpenseGroup>()
        expected.add(
            ExpenseGroup(
                1, "New name", "EUR", setOf(
                    ApplicationUser(41, "aaa", "aaa"),
                    ApplicationUser(43, "U", "u"),
                    ApplicationUser(1, "Aliaksei", "user.1@gmail.com"),
                    ApplicationUser(2, "Artemii", "user.2@gmail.com"),
                    ApplicationUser(3, "Uladzislau", "user.3@gmail.com")
                )
            )
        )
        expected.add(
            ExpenseGroup(
                9, "To be deleted", "DEL", setOf(
                    ApplicationUser(1, "Aliaksei", "user.1@gmail.com"),
                    ApplicationUser(2, "Artemii", "user.2@gmail.com"),
                    ApplicationUser(3, "Uladzislau", "user.3@gmail.com")
                )
            )
        )

        every { RequestsSender.sendGet(any()) } returns Gson().toJson(expected)

        val actual = backendService.getGroups()
        assertEquals(expected, actual)
    }


    @Test
    fun getGroupById() {
        val expected = ExpenseGroup(400, "pera", "AAA", setOf(ApplicationUser(39, "a", "a")))

        every { RequestsSender.sendGet(any()) } returns "{\"id\":400,\"name\":\"pera\",\"currency\":\"AAA\",\"users\":[{\"id\":39,\"username\":\"a\",\"email\":\"a\"}]}"

        val actual = backendService.getGroupById(400)
        assertEquals(expected, actual)
    }


    @Test
    fun getGroupVisualBarChart() {
        val expected = ArrayList<BarChartData>()
        expected.add(BarChartData(2, Pair("Artemii", 1549.8333333333335)))
        expected.add(BarChartData(1, Pair("Aliaksei", 166.33333333333334)))

        every { RequestsSender.sendGet("http://192.168.0.1/groups/17/users") } returns "[{\"id\":1,\"username\":\"Aliaksei\",\"email\":\"user.1@gmail.com\"},{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"}]"
        every { RequestsSender.sendGet("http://192.168.0.1/groups/17/users/1/expenses") } returns "[{\"id\": 246,\"amount\": -219.0,\"description\": \"from 1\",\"dateStamp\": \"2023-01-17\",\"category\": \"fiah\",\"globalId\": 0,\"user\": { \"id\": 1, \"username\": \"Aliaksei\", \"email\": \"user.1@gmail.com\" },\"group\": {\"id\": 17,\"name\": \"aaaaa\",\"currency\": \"ASD\",\"users\": [{ \"id\": 1, \"username\": \"Aliaksei\", \"email\": \"user.1@gmail.com\" },{ \"id\": 2, \"username\": \"Artemii\", \"email\": \"user.2@gmail.com\" }]}},{\"id\": 248,\"amount\": 438.0,\"description\": \"from 1\",\"dateStamp\": \"2023-01-17\",\"category\": \"fiah\",\"globalId\": 0,\"user\": { \"id\": 1, \"username\": \"Aliaksei\", \"email\": \"user.1@gmail.com\" },\"group\": {\"id\": 17,\"name\": \"aaaaa\",\"currency\": \"ASD\",\"users\": [{ \"id\": 1, \"username\": \"Aliaksei\", \"email\": \"user.1@gmail.com\" },{ \"id\": 2, \"username\": \"Artemii\", \"email\": \"user.2@gmail.com\" }]}},{\"id\": 46,\"amount\": -41.0,\"description\": \"i372tr\",\"dateStamp\": \"2023-01-20\",\"category\": \"egfw\",\"globalId\": -1,\"user\": { \"id\": 1, \"username\": \"Aliaksei\", \"email\": \"user.1@gmail.com\" },\"group\": {\"id\": 17,\"name\": \"aaaaa\",\"currency\": \"ASD\",\"users\": [{ \"id\": 1, \"username\": \"Aliaksei\", \"email\": \"user.1@gmail.com\" },{ \"id\": 2, \"username\": \"Artemii\", \"email\": \"user.2@gmail.com\" }]}},{\"id\": 89,\"amount\": -11.666666666666666,\"description\": \"test \",\"dateStamp\": \"2023-01-25\",\"category\": \"test\",\"globalId\": -1,\"user\": { \"id\": 1, \"username\": \"Aliaksei\", \"email\": \"user.1@gmail.com\" },\"group\": {\"id\": 17,\"name\": \"aaaaa\",\"currency\": \"ASD\",\"users\": [{ \"id\": 1, \"username\": \"Aliaksei\", \"email\": \"user.1@gmail.com\" },{ \"id\": 2, \"username\": \"Artemii\", \"email\": \"user.2@gmail.com\" }]}}]"
        every { RequestsSender.sendGet("http://192.168.0.1/groups/17/users/2/expenses") } returns "[{\"id\": 247,\"amount\": -219.0,\"description\": \"from 1\",\"dateStamp\": \"2023-01-17\",\"category\": \"fiah\",\"globalId\": 0,\"user\": { \"id\": 2, \"username\": \"Artemii\", \"email\": \"user.2@gmail.com\" },\"group\": {\"id\": 17,\"name\": \"aaaaa\",\"currency\": \"ASD\",\"users\": [{ \"id\": 1, \"username\": \"Aliaksei\", \"email\": \"user.1@gmail.com\" },{ \"id\": 2, \"username\": \"Artemii\", \"email\": \"user.2@gmail.com\" }]}},{\"id\": 49,\"amount\": 123.0,\"description\": \"i372tr\",\"dateStamp\": \"2023-01-20\",\"category\": \"egfw\",\"globalId\": -1,\"user\": { \"id\": 2, \"username\": \"Artemii\", \"email\": \"user.2@gmail.com\" },\"group\": {\"id\": 17,\"name\": \"aaaaa\",\"currency\": \"ASD\",\"users\": [{ \"id\": 1, \"username\": \"Aliaksei\", \"email\": \"user.1@gmail.com\" },{ \"id\": 2, \"username\": \"Artemii\", \"email\": \"user.2@gmail.com\" }]}},{\"id\": 50,\"amount\": -22.5,\"description\": \"srbt\",\"dateStamp\": \"2023-01-15\",\"category\": \"test\",\"globalId\": -1,\"user\": { \"id\": 2, \"username\": \"Artemii\", \"email\": \"user.2@gmail.com\" },\"group\": {\"id\": 17,\"name\": \"aaaaa\",\"currency\": \"ASD\",\"users\": [{ \"id\": 1, \"username\": \"Aliaksei\", \"email\": \"user.1@gmail.com\" },{ \"id\": 2, \"username\": \"Artemii\", \"email\": \"user.2@gmail.com\" }]}},{\"id\": 52,\"amount\": 45.0,\"description\": \"srbt\",\"dateStamp\": \"2023-01-15\",\"category\": \"test\",\"globalId\": -1,\"user\": { \"id\": 2, \"username\": \"Artemii\", \"email\": \"user.2@gmail.com\" },\"group\": {\"id\": 17,\"name\": \"aaaaa\",\"currency\": \"ASD\",\"users\": [{ \"id\": 1, \"username\": \"Aliaksei\", \"email\": \"user.1@gmail.com\" },{ \"id\": 2, \"username\": \"Artemii\", \"email\": \"user.2@gmail.com\" }]}},{\"id\": 90,\"amount\": -11.666666666666666,\"description\": \"test \",\"dateStamp\": \"2023-01-25\",\"category\": \"test\",\"globalId\": -1,\"user\": { \"id\": 2, \"username\": \"Artemii\", \"email\": \"user.2@gmail.com\" },\"group\": {\"id\": 17,\"name\": \"aaaaa\",\"currency\": \"ASD\",\"users\": [{ \"id\": 1, \"username\": \"Aliaksei\", \"email\": \"user.1@gmail.com\" },{ \"id\": 2, \"username\": \"Artemii\", \"email\": \"user.2@gmail.com\" }]}},{\"id\": 92,\"amount\": 35.0,\"description\": \"test \",\"dateStamp\": \"2023-01-25\",\"category\": \"test\",\"globalId\": -1,\"user\": { \"id\": 2, \"username\": \"Artemii\", \"email\": \"user.2@gmail.com\" },\"group\": {\"id\": 17,\"name\": \"aaaaa\",\"currency\": \"ASD\",\"users\": [{ \"id\": 1, \"username\": \"Aliaksei\", \"email\": \"user.1@gmail.com\" },{ \"id\": 2, \"username\": \"Artemii\", \"email\": \"user.2@gmail.com\" }]}},{\"id\": 116,\"amount\": 700.0,\"description\": \"test7\",\"dateStamp\": \"2023-01-16\",\"category\": \"test\",\"globalId\": 0,\"user\": { \"id\": 2, \"username\": \"Artemii\", \"email\": \"user.2@gmail.com\" },\"group\": {\"id\": 17,\"name\": \"aaaaa\",\"currency\": \"ASD\",\"users\": [{ \"id\": 1, \"username\": \"Aliaksei\", \"email\": \"user.1@gmail.com\" },{ \"id\": 2, \"username\": \"Artemii\", \"email\": \"user.2@gmail.com\" }]}},{\"id\": 125,\"amount\": 900.0,\"description\": \"test9\",\"dateStamp\": \"2023-01-16\",\"category\": \"test\",\"globalId\": 0,\"user\": { \"id\": 2, \"username\": \"Artemii\", \"email\": \"user.2@gmail.com\" },\"group\": {\"id\": 17,\"name\": \"aaaaa\",\"currency\": \"ASD\",\"users\": [{ \"id\": 1, \"username\": \"Aliaksei\", \"email\": \"user.1@gmail.com\" },{ \"id\": 2, \"username\": \"Artemii\", \"email\": \"user.2@gmail.com\" }]}}]"

        val actual = backendService.getGroupVisualBarChart(17)
        assertEquals(expected, actual)
    }

    @Test
    fun getGroupVisualBarChartEmpty() {
        val expected = ArrayList<BarChartData>()

        val actual = backendService.getGroupVisualBarChart(-1)
        assertEquals(expected, actual)
    }


    @Test
    fun getGroupList() {
        val expected = ArrayList<Expense>()
        expected.add(Expense(146, 6500.0, "2023-01-16", "test13", "test13.1", 0))

        every { RequestsSender.sendGet(any()) } returns "[{\"id\":146,\"amount\":6500.0,\"description\":\"test13.1\",\"dateStamp\":\"2023-01-16\",\"category\":\"test13\",\"globalId\":0,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":145,\"name\":\"test13\",\"currency\":\"TAJ\",\"users\":[{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"}]}}]"

        val actual = backendService.getGroupList(146)
        assertEquals(expected, actual)
    }

    @Test
    fun getGroupListEmpty() {
        val expected = ArrayList<Expense>()

        val actual = backendService.getGroupList(-1)
        assertEquals(expected, actual)
    }

    @Test
    fun getGroupListEmptyWhenAmountMinus() {
        val expected = ArrayList<Expense>()

        every { RequestsSender.sendGet(any()) } returns "[{\"id\":146,\"amount\":-6500.0,\"description\":\"test13.1\",\"dateStamp\":\"2023-01-16\",\"category\":\"test13\",\"globalId\":0,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":145,\"name\":\"test13\",\"currency\":\"TAJ\",\"users\":[{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"}]}}]"

        val actual = backendService.getGroupList(146)
        assertEquals(expected, actual)
    }

    @Test
    fun getGroupListOnlyReal() {
        val expected = ArrayList<Expense>()
        expected.add(Expense(148, 13000.0, "2023-01-16", "test13", "test13.1", 0))

        every { RequestsSender.sendGet(any()) } returns "[{\"id\":146,\"amount\":-6500.0,\"description\":\"test13.1\",\"dateStamp\":\"2023-01-16\",\"category\":\"test13\",\"globalId\":0,\"user\":{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},\"group\":{\"id\":145,\"name\":\"test13\",\"currency\":\"TAJ\",\"users\":[{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"}]}},{\"id\":147,\"amount\":-6500.0,\"description\":\"test13.1\",\"dateStamp\":\"2023-01-16\",\"category\":\"test13\",\"globalId\":0,\"user\":{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},\"group\":{\"id\":145,\"name\":\"test13\",\"currency\":\"TAJ\",\"users\":[{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"}]}},{\"id\":148,\"amount\":13000.0,\"description\":\"test13.1\",\"dateStamp\":\"2023-01-16\",\"category\":\"test13\",\"globalId\":0,\"user\":{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"},\"group\":{\"id\":145,\"name\":\"test13\",\"currency\":\"TAJ\",\"users\":[{\"id\":2,\"username\":\"Artemii\",\"email\":\"user.2@gmail.com\"},{\"id\":3,\"username\":\"Uladzislau\",\"email\":\"user.3@gmail.com\"}]}}]"

        val actual = backendService.getGroupList(146)
        assertEquals(expected, actual)
    }


    private fun getDate(s: String): LocalDate {
        return LocalDate.parse(s, DateTimeFormatter.ofPattern("yyyy-MM-dd"))
    }
}
